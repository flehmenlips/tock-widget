<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tock Widget</title>
    <script>
        !function(t,o,c,k){if(!t.tock){var e=t.tock=function(){e.callMethod?
        e.callMethod.apply(e,arguments):e.queue.push(arguments)};t._tock||(t._tock=e),
        e.push=e,e.loaded=!0,e.version='1.0',e.queue=[];var f=o.createElement(c);f.async=!0,
        f.src=k;var g=o.getElementsByTagName(c)[0];g.parentNode.insertBefore(f,g)}}(
        window,document,'script','https://www.exploretock.com/tock.js');

        tock('init', 'coq-au-vin-portland');

        // Dynamically load Stripe script
        (function() {
            var stripeScript = document.createElement('script');
            stripeScript.src = 'https://js.stripe.com/v3';
            stripeScript.async = true;
            stripeScript.onload = function() {
                console.log('Stripe script loaded successfully');
            };
            stripeScript.onerror = function() {
                console.log('Error loading Stripe script');
            };
            document.head.appendChild(stripeScript);
        })();
    </script>
    <script>
        function debounce(func, wait) {
            let timeout;
            return function() {
                const context = this, args = arguments;
                clearTimeout(timeout);
                timeout = setTimeout(() => func.apply(context, args), wait);
            };
        }

        function sendHeight() {
            const targetOrigin = 'https://www.seabreeze.farm'; // Ensure this matches the origin of the parent frame
            parent.postMessage(document.body.scrollHeight, targetOrigin);
        }

        const debouncedSendHeight = debounce(sendHeight, 200); // Adjust the debounce time as needed

        window.addEventListener('load', sendHeight);
        window.addEventListener('resize', debouncedSendHeight);

        document.addEventListener('DOMContentLoaded', (event) => {
            const observer = new MutationObserver(debouncedSendHeight);
            observer.observe(document.body, { childList: true, subtree: true });
        });
    </script>
</head>
<body>
    <div id="Tock_widget_container" data-tock-display-mode="Inline" data-tock-color-mode="Blue" data-tock-locale="en-us" data-tock-timezone="America/Los_Angeles" data-tock-offering="430987"></div>
</body>
</html>
